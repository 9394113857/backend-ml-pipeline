üß™ ML PIPELINE ‚Äì LOCAL + GITHUB ACTIONS (FINAL LOCKED DOC)
Filename: ML_PIPELINE_LOCAL_AND_GITHUB_SETUP_FINAL.txt
Author: Raghu
Purpose: Production ML Recommendation Pipeline Automation
Status: ‚úÖ VERIFIED & WORKING
===========================================================


üß™ LOCAL TEST (MANDATORY ‚Äì DO THIS FIRST)
======================================

‚ñ∂ PowerShell (VS Code Terminal)

1Ô∏è‚É£ SET ENVIRONMENT VARIABLES (LOCAL ONLY)

# EVENTS DB (ML Events Service)
$env:EVENTS_DB_URL="postgresql+psycopg2://neondb_owner:npg_GMJEZ1C5xNnc@ep-lingering-field-a1cjhhsl-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require"

# PRODUCT DB (Product Service)
$env:PRODUCT_DB_URL="postgresql+psycopg2://neondb_owner:npg_EvfIxt5VdU4b@ep-blue-moon-a1jdsww9-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require"

# RECOMMENDATION DB (ML Target DB)
$env:RECO_DB_URL="postgresql+psycopg2://neondb_owner:npg_zXi2xZLW4nUY@ep-dawn-sea-a1nfiljx-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require"

# EMAIL ALERTS (GMAIL APP PASSWORD)
$env:MAIL_USERNAME="practicesession3@gmail.com"
$env:MAIL_PASSWORD="whcb lxws ufjk vvpm"


2Ô∏è‚É£ RUN ML PIPELINE LOCALLY

python pipeline/run_pipeline.py

EXPECTED RESULT:
‚úÖ Neon recommendations table updated
‚úÖ Backend-ML-Recommendation-Service serves latest data
‚úÖ Email alert RECEIVED

‚ùå If email not received ‚Üí DO NOT PUSH


3Ô∏è‚É£ CLEAR LOCAL SECRETS (VERY IMPORTANT)

Remove-Item Env:EVENTS_DB_URL
Remove-Item Env:PRODUCT_DB_URL
Remove-Item Env:RECO_DB_URL
Remove-Item Env:MAIL_USERNAME
Remove-Item Env:MAIL_PASSWORD


===========================================================
üîê GITHUB ACTIONS SECRETS (ADD EXACTLY AS BELOW)
===========================================================

GitHub Repo ‚Üí
Settings ‚Üí
Secrets and variables ‚Üí
Actions ‚Üí
New repository secret


üóÑ REQUIRED DATABASE SECRETS
----------------------------

Name: EVENTS_DB_URL
Value:
postgresql+psycopg2://neondb_owner:npg_GMJEZ1C5xNnc@ep-lingering-field-a1cjhhsl-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require


Name: PRODUCT_DB_URL
Value:
postgresql+psycopg2://neondb_owner:npg_EvfIxt5VdU4b@ep-blue-moon-a1jdsww9-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require


Name: RECO_DB_URL
Value:
postgresql+psycopg2://neondb_owner:npg_zXi2xZLW4nUY@ep-dawn-sea-a1nfiljx-pooler.ap-southeast-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require


üìß OPTIONAL EMAIL ALERT SECRETS
-------------------------------

Name: MAIL_USERNAME
Value:
practicesession3@gmail.com


Name: MAIL_PASSWORD
Value:
whcb lxws ufjk vvpm

‚ö†Ô∏è NOTE:
‚Ä¢ This is a Gmail **App Password**
‚Ä¢ NOT your Gmail login password


===========================================================
ü§ñ WHAT HAPPENS AFTER THIS (AUTOMATION FLOW)
===========================================================

‚Ä¢ GitHub Actions loads secrets automatically
‚Ä¢ Cron triggers ML pipeline (every X hours)
‚Ä¢ Fetches live Neon DB data
‚Ä¢ Builds features
‚Ä¢ Ranks products
‚Ä¢ Saves final recommendations to Neon
‚Ä¢ Backend serves latest recommendations
‚Ä¢ Angular shows personalized products
‚Ä¢ Success / Failure email sent automatically

üìå No manual work after setup
üìå Works forever (FREE tier)
üìå Amazon-style batch recommender architecture


===========================================================
üöÄ FINAL GIT COMMANDS (NEW REPO PUSH ‚Äì SAFE MODE)
===========================================================

git init
git branch -M main
git remote add origin https://github.com/9394113857/backend-ml-pipeline.git


4Ô∏è‚É£ FIRST-TIME SAFE PULL (IMPORTANT)

# If GitHub repo already has README / LICENSE:
git pull origin main --allow-unrelated-histories

# If repo is totally empty:
# (Skip this step)


5Ô∏è‚É£ COMMIT & PUSH

git add .
git commit -m "Add production ML recommendation pipeline with cron and email alerts"
git push --set-upstream origin main

# ONLY if Git complains about history:
git push --set-upstream origin main --force


===========================================================
üß† IMPORTANT RULES (LOCK THIS)
===========================================================

‚úÖ NEVER commit secrets
‚úÖ ALWAYS test locally before push
‚úÖ If email arrives ‚Üí safe to deploy
‚úÖ One entry point ‚Üí pipeline/run_pipeline.py
‚úÖ This architecture is interview-grade
‚úÖ Mirrors real-world ML batch systems

===========================================================
üéØ STATUS: FINAL ‚Ä¢ STABLE ‚Ä¢ PRODUCTION READY
===========================================================
